/*
 * Copyright 2008 - 2025 Haulmont Technology Ltd. All Rights Reserved.
 * Haulmont Technology proprietary and confidential.
 * Use is subject to license terms.
 */

package com.haulmont.shamrock.as.google.places.gate.constants;

import com.google.common.geometry.*;
import com.haulmont.shamrock.as.gis.Geometry;
import com.haulmont.shamrock.as.google.places.gate.utils.CityGeometry;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public final class GeometryConstants {

    private GeometryConstants() {
    }

    private static final double[][] JERSEY_GEOGRAPHY = new double[][]{
            {49.2546150466885, -2.09955206266659},
            {49.2552715452296, -2.10004290681582},
            {49.2552356568683, -2.10161870456182},
            {49.2543454420919, -2.10280826420967},
            {49.2537633362362, -2.10355794157908},
            {49.251948697539, -2.10362097344068},
            {49.2516747014329, -2.10415607408891},
            {49.2503331490258, -2.10418759001982},
            {49.2503642261825, -2.10503449749115},
            {49.2497882013392, -2.10696300567247},
            {49.2498844977536, -2.10957815936149},
            {49.2503108259858, -2.10963046238703},
            {49.2509892668134, -2.109940257478},
            {49.2513035349532, -2.11125856315857},
            {49.2519679559941, -2.11189022333133},
            {49.2518119185228, -2.11244778751779},
            {49.2509835767033, -2.1122757908521},
            {49.2506154689559, -2.11309051181524},
            {49.2501033525421, -2.11544951459359},
            {49.2500394470442, -2.11717551604443},
            {49.250563819849, -2.11915900956069},
            {49.2513087873285, -2.12070798521654},
            {49.2518213289313, -2.12066708150394},
            {49.2515593687513, -2.11935916932043},
            {49.2518765876889, -2.11941331640867},
            {49.2520912208708, -2.12057764657516},
            {49.2528100683635, -2.12011119366048},
            {49.2540662072073, -2.12052291269401},
            {49.2543699516616, -2.12235083808741},
            {49.2543156804553, -2.12417742232606},
            {49.2535051066287, -2.12557485312232},
            {49.2534805966296, -2.12703933904356},
            {49.254436477575, -2.12963571716909},
            {49.2532635075353, -2.13721027522615},
            {49.2559315362948, -2.14077224839593},
            {49.256369191286, -2.14460780708623},
            {49.2598317807626, -2.14724173613797},
            {49.2622193905339, -2.15285291699524},
            {49.2600059541496, -2.1544394435773},
            {49.2616295006236, -2.16048916596014},
            {49.2584886995025, -2.15974820569465},
            {49.2575324593872, -2.16080968988717},
            {49.2576265524857, -2.16388819525889},
            {49.2587149558948, -2.16537883289379},
            {49.2551542514642, -2.16915001856785},
            {49.255082474545, -2.17010220266775},
            {49.2533908724221, -2.17027587567634},
            {49.2532118611989, -2.17147951694665},
            {49.252237573576, -2.17410137620845},
            {49.2513392073246, -2.17465759929041},
            {49.2511411487408, -2.1735830392912},
            {49.2501567529632, -2.1743521627011},
            {49.2494754555527, -2.17403935006223},
            {49.2493544274354, -2.17471359034073},
            {49.2493594611604, -2.17532345760287},
            {49.2499247671075, -2.17610498624208},
            {49.2506032132405, -2.1793598468314},
            {49.2505533149393, -2.18064060158576},
            {49.2483927576722, -2.18365003989948},
            {49.2500981000385, -2.18618740942657},
            {49.2499983023647, -2.18753119604253},
            {49.2485258255198, -2.18913247472392},
            {49.2494187715346, -2.19263543949648},
            {49.2488830058637, -2.20125605906946},
            {49.2537256960725, -2.20953335588842},
            {49.2557669770142, -2.22021391198473},
            {49.2611691365367, -2.22711791778806},
            {49.2592891260681, -2.22981621985605},
            {49.2562886630589, -2.23251452192414},
            {49.2588900084847, -2.24310924733209},
            {49.2583543456026, -2.24855413143132},
            {49.2520379903117, -2.25505580608342},
            {49.2401173413115, -2.25022782985661},
            {49.2329019211137, -2.2395633668134},
            {49.2216493646899, -2.229585549278},
            {49.2110250523174, -2.22576608364079},
            {49.2008471189043, -2.22400655452702},
            {49.1892647174656, -2.2301434487531},
            {49.1873293847914, -2.23662366573308},
            {49.1815509775055, -2.24615087215398},
            {49.1742007476631, -2.22658147839661},
            {49.1770343625003, -2.20941534230894},
            {49.1780022432717, -2.20375051767337},
            {49.182189161607, -2.2021197349942},
            {49.1846190949729, -2.2007893595237},
            {49.1839265936526, -2.19239940982561},
            {49.1806629411545, -2.19060769425391},
            {49.1798165303733, -2.18662193168291},
            {49.1760267907848, -2.18617400279004},
            {49.1761518342453, -2.19041323414433},
            {49.1721742343839, -2.18806965402064},
            {49.1687262421914, -2.189987768744},
            {49.1684612792581, -2.18373704827366},
            {49.1702368216875, -2.18129833354624},
            {49.1718540752621, -2.17956399205173},
            {49.169312255623, -2.17792877703937},
            {49.1710914503393, -2.17526359376541},
            {49.1698345666919, -2.17491805504596},
            {49.1688021272856, -2.1742291935725},
            {49.1684598351941, -2.17131039617288},
            {49.1678397302867, -2.17259757950433},
            {49.1671073760775, -2.17345560939339},
            {49.1659232468244, -2.17229634110754},
            {49.1652469872403, -2.16772557995046},
            {49.1671817964038, -2.16591226815854},
            {49.1710392502808, -2.16376106727967},
            {49.1722944896748, -2.163543773725},
            {49.1741846517447, -2.16476550261905},
            {49.1749613702153, -2.16387433001773},
            {49.175854725701, -2.16613241040409},
            {49.1763013973977, -2.16803392679355},
            {49.1774505406591, -2.16812637810358},
            {49.1776603959793, -2.16933131805297},
            {49.1803182056001, -2.16868924304481},
            {49.1804636607815, -2.16762750206374},
            {49.1821239415629, -2.16819654416372},
            {49.1834475539389, -2.17018179262357},
            {49.185736265292, -2.16714037449503},
            {49.1835706640112, -2.16167145376085},
            {49.1842354440092, -2.15888801721746},
            {49.185902322673, -2.1618399623419},
            {49.1866235436603, -2.16632000900074},
            {49.1877374378068, -2.16908344189005},
            {49.1897407706856, -2.16911714360629},
            {49.1938555278435, -2.16364083040185},
            {49.1961190753298, -2.15473128965846},
            {49.1963826354889, -2.14564535834415},
            {49.1953562381988, -2.13500207597735},
            {49.1928237723828, -2.12697676810694},
            {49.1892814647245, -2.1198097671213},
            {49.1858791525044, -2.11646223177286},
            {49.183055866331, -2.11856501439161},
            {49.1801202070394, -2.11929450599473},
            {49.1787371814378, -2.12633248395196},
            {49.1758293214431, -2.12817777450527},
            {49.170003264067, -2.12401491686524},
            {49.1676968135281, -2.11152599770048},
            {49.1694056602305, -2.10674065982221},
            {49.1737718185909, -2.10624978094802},
            {49.1763420928158, -2.10627388620469},
            {49.1757701166447, -2.10089065808734},
            {49.1765447953941, -2.09688072098561},
            {49.1750945036092, -2.09268706987859},
            {49.1718485072639, -2.08866508014853},
            {49.1629986616274, -2.07873282554192},
            {49.1626985658254, -2.07483958184457},
            {49.162847475516, -2.07094633814722},
            {49.163894384468, -2.0710013061198},
            {49.1659239882425, -2.06942718037612},
            {49.1668310986622, -2.06682308637073},
            {49.1663351696785, -2.06138657964561},
            {49.169101377426, -2.05479178096721},
            {49.1690814783803, -2.05123688956257},
            {49.1682759124648, -2.04768199815805},
            {49.1659912807372, -2.0396709931199},
            {49.1623595328132, -2.03251829496639},
            {49.1645764612985, -2.03264704099911},
            {49.1669055327838, -2.02745428434628},
            {49.1708969804688, -2.02964296690243},
            {49.1753370004339, -2.03097334257382},
            {49.1802815778273, -2.03290453306454},
            {49.1847207560534, -2.03311910978573},
            {49.190365581768, -2.03273287168759},
            {49.1953927909253, -2.02977171293514},
            {49.1978781609588, -2.02734699598568},
            {49.1986808836432, -2.02423563352841},
            {49.1962306070229, -2.02249756208676},
            {49.1999497894891, -2.01612463346737},
            {49.2032147981803, -2.01834013811367},
            {49.2051337443863, -2.0219289337756},
            {49.2087068169479, -2.02023914209622},
            {49.2107096571865, -2.0249008213641},
            {49.2126221801887, -2.02317616096752},
            {49.2134693436547, -2.02668717256802},
            {49.2161728109003, -2.02993264547604},
            {49.2184398944457, -2.02972879759091},
            {49.2192510434627, -2.02690174928921},
            {49.220959143609, -2.025962976134},
            {49.2237024914925, -2.02357044569271},
            {49.2234747598898, -2.02152123800533},
            {49.2244820218646, -2.01912334314602},
            {49.2217903953776, -2.010113803065},
            {49.2224061624801, -2.0097731625201},
            {49.2259517082031, -2.02342024198788},
            {49.2335324407047, -2.02453604093807},
            {49.2333467887116, -2.02643504492062},
            {49.2321522990481, -2.02730408064144},
            {49.2330595517659, -2.03160634390133},
            {49.2353906613432, -2.03392913690823},
            {49.2357041526435, -2.03874101988094},
            {49.2361174665227, -2.04163780561703},
            {49.2363801644711, -2.04523196569698},
            {49.238977304864, -2.04445412508267},
            {49.2401453603203, -2.04311838499325},
            {49.240822627349, -2.04521989575642},
            {49.2396342296377, -2.04757956913727},
            {49.2399588582664, -2.04865178219097},
            {49.2407878227909, -2.05068959049004},
            {49.241728845938, -2.05058163157719},
            {49.2439470417103, -2.05139568201321},
            {49.2432630319372, -2.05265028527992},
            {49.2422988356933, -2.0529607509734},
            {49.2421751632537, -2.05417243889588},
            {49.2412109457687, -2.05529829612988},
            {49.2412833994804, -2.05687476447838},
            {49.2391703762306, -2.05759292594212},
            {49.2393152895352, -2.06074586263912},
            {49.2393529404589, -2.06357559314984},
            {49.2382930056984, -2.06505483142155},
            {49.2389702981294, -2.06782153002041},
            {49.2372869002403, -2.06759488335865},
            {49.2363880429152, -2.07011481872814},
            {49.237000125508, -2.07373848310726},
            {49.2373411897121, -2.07627987614887},
            {49.2386349359135, -2.07779130092877},
            {49.2385837119708, -2.08101933947819},
            {49.2393146315221, -2.08156047514694},
            {49.240661955674, -2.08047082773464},
            {49.2419976418317, -2.08252942315357},
            {49.2441177670127, -2.08304306617993},
            {49.2465739865551, -2.08531623832005},
            {49.248021571062, -2.08449950567501},
            {49.2481664583939, -2.08600020161884},
            {49.2474148773969, -2.08724340549725},
            {49.2487643879603, -2.08779996386784},
            {49.2494975642035, -2.08964398256558},
            {49.2499365892575, -2.09067260972279},
            {49.251944324479, -2.0905854379298},
            {49.2539427867694, -2.09264269224423},
            {49.25419663691, -2.09378531328457},
            {49.2541703761098, -2.09527125707882},
            {49.2535418738764, -2.09615638605374},
            {49.2537677148152, -2.09719171873348},
            {49.2550807247959, -2.09852209440487},
            {49.2553940911112, -2.0993374859454},
            {49.2546150466885, -2.09955206266659}
    };

    public static final CityGeometry LONDON;

    static {
        CityGeometry g = new CityGeometry(Geometry.Type.GEOMETRY_COLLECTION, "GB");
        List<Geometry> geometries = Arrays.asList(
                new Geometry(Geometry.Type.CIRCLE, new double[][]{
                        {51.5309004, -0.1247498, 40233.6}
                }), // London
                new Geometry(Geometry.Type.POLYGON, new double[][]{
                        {51.870238, -0.390894},
                        {51.870052, -0.390422},
                        {51.870874, -0.386517},
                        {51.870755, -0.382333},
                        {51.870967, -0.377698},
                        {51.871960, -0.374115},
                        {51.871708, -0.372183},
                        {51.871974, -0.369887},
                        {51.873113, -0.368342},
                        {51.876054, -0.350747},
                        {51.876902, -0.350361},
                        {51.878160, -0.350103},
                        {51.878849, -0.353193},
                        {51.878505, -0.354974},
                        {51.879829, -0.361240},
                        {51.881485, -0.361583},
                        {51.881604, -0.362055},
                        {51.880121, -0.365338},
                        {51.884412, -0.369608},
                        {51.883909, -0.371196},
                        {51.885088, -0.372527},
                        {51.884637, -0.376260},
                        {51.883670, -0.376089},
                        {51.882465, -0.377483},
                        {51.882836, -0.379028},
                        {51.879154, -0.384264},
                        {51.877312, -0.381217},
                        {51.876213, -0.380530},
                        {51.875365, -0.382075},
                        {51.874014, -0.384092},
                        {51.872808, -0.386989},
                        {51.870238, -0.390894}
                }), // Luton Airport
                new Geometry(Geometry.Type.POLYGON, new double[][]{
                        {51.886743, 0.206981},
                        {51.879326, 0.203805},
                        {51.877524, 0.205736},
                        {51.872384, 0.215349},
                        {51.871907, 0.217195},
                        {51.874610, 0.235648},
                        {51.875100, 0.236764},
                        {51.879697, 0.243845},
                        {51.884785, 0.254833},
                        {51.886624, 0.261784},
                        {51.890014, 0.267319},
                        {51.893418, 0.271869},
                        {51.894980, 0.271697},
                        {51.896966, 0.271010},
                        {51.899032, 0.268650},
                        {51.899932, 0.266719},
                        {51.901998, 0.261827},
                        {51.900607, 0.256999},
                        {51.898595, 0.249102},
                        {51.888783, 0.234876},
                        {51.885670, 0.230434},
                        {51.889180, 0.225735},
                        {51.889895, 0.220070},
                        {51.889339, 0.217066},
                        {51.887193, 0.214663},
                        {51.885021, 0.215221},
                        {51.882425, 0.217023},
                        {51.881366, 0.215478},
                        {51.881816, 0.214319},
                        {51.883962, 0.212989},
                        {51.886160, 0.213032},
                        {51.887458, 0.212045},
                        {51.886743, 0.206981}
                }), // Stansted Airport
                new Geometry(Geometry.Type.POLYGON, new double[][]{
                        {51.159579, -0.151019},
                        {51.159296, -0.155718},
                        {51.159323, -0.160160},
                        {51.159552, -0.164087},
                        {51.162270, -0.172584},
                        {51.164732, -0.177069},
                        {51.163750, -0.184579},
                        {51.160924, -0.188699},
                        {51.161705, -0.194385},
                        {51.158879, -0.195651},
                        {51.158085, -0.198891},
                        {51.155770, -0.202067},
                        {51.153913, -0.202475},
                        {51.153845, -0.203998},
                        {51.152015, -0.206101},
                        {51.151234, -0.205715},
                        {51.149700, -0.203741},
                        {51.149538, -0.205264},
                        {51.150238, -0.207174},
                        {51.150359, -0.213954},
                        {51.148421, -0.214877},
                        {51.148260, -0.215628},
                        {51.144369, -0.215049},
                        {51.143077, -0.213697},
                        {51.142471, -0.211530},
                        {51.143373, -0.201402},
                        {51.143925, -0.198226},
                        {51.145204, -0.198548},
                        {51.147371, -0.182283},
                        {51.146321, -0.177069},
                        {51.145756, -0.174215},
                        {51.146429, -0.165589},
                        {51.147748, -0.162907},
                        {51.149915, -0.161662},
                        {51.149834, -0.158272},
                        {51.151759, -0.157671},
                        {51.150346, -0.153852},
                        {51.149942, -0.150397},
                        {51.151921, -0.150805},
                        {51.153603, -0.152006},
                        {51.155070, -0.150955},
                        {51.155191, -0.148745},
                        {51.159579, -0.151019}
                }) // Gatwick Airport
        );
        g.setGeometries(geometries);

        LONDON = g;
    }

    public static final List<CityGeometry> CITIES = Arrays.asList(
            LONDON
    );

    public static final S2Polygon JERSEY_POLYGON = buildPolygon(JERSEY_GEOGRAPHY);

    private static S2Polygon buildPolygon(double[][] latLngs) {
        S2PolygonBuilder pb = new S2PolygonBuilder(S2PolygonBuilder.Options.UNDIRECTED_XOR);

        List<S2Point> points = new ArrayList<>(latLngs.length);
        for (double[] latLng : latLngs) {
            points.add(S2LatLng.fromDegrees(latLng[0], latLng[1]).toPoint());
        }
        S2Loop loop = new S2Loop(points);
        pb.addLoop(loop);

        return pb.assemblePolygon();
    }

    public static void main(String[] args) {
        S2LatLngRect bound = JERSEY_POLYGON.getRectBound();
        System.out.printf("%f,%f|%f,%f", bound.lo().latDegrees(), bound.lo().lngDegrees(), bound.hi().latDegrees(), bound.hi().lngDegrees());
    }
}
